# ============================================
# AURORA POSTGRES DATABASE CONFIG
# ============================================
# Writer Endpoint (para INSERT, UPDATE, DELETE)
DB_WRITER_ENDPOINT=retofinal-aurora-cluster.cluster-cidaia4o0hjo.us-east-1.rds.amazonaws.com
# Reader Endpoint (para SELECT - distribuido entre los 3 nodos)
DB_READER_ENDPOINT=retofinal-aurora-cluster.cluster-ro-cidaia4o0hjo.us-east-1.rds.amazonaws.com

DB_PORT=5432
DB_NAME=key_management
DB_USER=postgres
DB_PASSWORD=postgres_password

# Connection Pool Settings - Writer
DB_POOL_MAX_SIZE=50
DB_POOL_MIN_IDLE=10
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# Connection Pool Settings - Reader
DB_READER_POOL_MAX_SIZE=100
DB_READER_POOL_MIN_IDLE=20

# ============================================
# REDIS CONFIG â€” AWS ELASTICACHE CLUSTER MODE ENABLED
# ============================================
REDIS_MODE=cluster

# Endpoint clustercfg (Configuration Endpoint)
REDIS_CLUSTER_NODES=retofinal-redis.eyhzkl.clustercfg.use1.cache.amazonaws.com:6379

REDIS_HOST=retofinal-redis.eyhzkl.clustercfg.use1.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_SSL_ENABLED=false

REDIS_TIMEOUT=3000
REDIS_CONNECT_TIMEOUT=10000
REDIS_MAX_REDIRECTS=3

# Lettuce Pool Settings
REDIS_POOL_MAX_ACTIVE=50
REDIS_POOL_MAX_IDLE=10
REDIS_POOL_MIN_IDLE=5
REDIS_POOL_MAX_WAIT=2000
REDIS_SHUTDOWN_TIMEOUT=100

# Redisson Cluster Settings
REDIS_CLUSTER_TIMEOUT=3000
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_INTERVAL=1500
REDIS_MASTER_POOL_SIZE=50
REDIS_SLAVE_POOL_SIZE=50
REDIS_MASTER_MIN_IDLE=10
REDIS_SLAVE_MIN_IDLE=10

# ============================================
# NETWORK INFO (from Terraform outputs)
# ============================================
REDIS_CONNECTION_STRING=retofinal-redis.eyhzkl.clustercfg.use1.cache.amazonaws.com:6379
REDIS_ENDPOINT=retofinal-redis.eyhzkl.clustercfg.use1.cache.amazonaws.com
